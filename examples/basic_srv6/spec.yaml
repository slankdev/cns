# http://www.asciiflow.com


nodes:
  - name: S0
    image: slankdev/ubuntu:18.04
    interfaces:
    - { name: net0, type: direct, opts: R0#net1 }
  - name: S1
    image: slankdev/ubuntu:18.04
    interfaces:
    - { name: net0, type: direct, opts: R3#net1 }

  - name: R0
    image: slankdev/frr
    interfaces:
    - { name: net0, type: direct, opts: R1#net0 }
    - { name: net1, type: direct, opts: S0#net0 }
  - name: R1
    image: slankdev/frr
    interfaces:
    - { name: net0, type: direct, opts: R0#net0 }
    - { name: net1, type: direct, opts: R2#net0 }
    - { name: net2, type: bridge, opts: SW0 }
  - name: R2
    image: slankdev/frr
    interfaces:
    - { name: net0, type: direct, opts: R1#net1 }
    - { name: net1, type: direct, opts: S1#net0 }
  - name: R3
    image: slankdev/frr
    interfaces:
    - { name: net0, type: bridge, opts: SW0 }
  - name: R4
    image: slankdev/frr
    interfaces:
    - { name: net0, type: bridge, opts: SW0 }

switches:
  - name: SW0
    interfaces:
    - { name: net2, type: container, opts: R1 }
    - { name: net0, type: container, opts: R3 }
    - { name: net0, type: container, opts: R4 }

node_configs:
  - name: C0
    cmds:
      - cmd: ip link set dev net0 up
      - cmd: >-
          vtysh -c "conf t"
          -c "router bgp 100                  "
          -c "  bgp router-id 2.2.2.2         "

